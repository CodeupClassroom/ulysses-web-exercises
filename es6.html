<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Books</title>
</head>
<body>
<table>
    <thead>
    <tr>
        <th>
            <a class="sort" class="header" href="#">Friend</a>
        </th>
        <td class="header">Books</td>
    </tr>
    </thead>
    <tbody id="friends">
    </tbody>
</table>
<script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"
>
</script>
<script>
    // global variables
    // local variables -> defined inside of a function
    // parameters -> inside of a function
    // block level -> anywhere, either inside of a function or in the global scope

    function uppercaseName(name) { // parameter -> function level scope
        var modifiedName = name.toUpperCase(); // local variable (local to the function) -> function level
        return modifiedName;
    }

    function multiplyIfPositive(number) { // parameter -> function level scope
        if (number > 0) {
            let multiplied = number * 10; // local variable (inside of a function) -> block level scope
            return multiplied;
        }
        // console.log(multiplied); // error, multiplied should not be used outside of the if block
        return number;
    }

    if (true) { // start of the block
        const cohortName = 'Ulysses'; // block level scope
        let number = 7; // block level scope
        console.log(number);
        console.log(cohortName);
    } // end of the block

    const tbody =  $('#friends');
    const sortName = $('.sort');
    const friends = [
        {name: 'Oliver', books: ['Ansible for DevOps', 'Servers for hackers']},
        {
            name: 'Barry',
            books: ['Working effectively with unit tests', '50 quick ideas for your tests']
        },
        {
            name: 'Jessica',
            books: ['Understanding the 4 rules of simple design', 'Principles of package design']
        },
        {name: 'Clark', books: ['Selling test driven projects']}
    ];
    friends.push({name: 'Fer', books: []}); // valid to modify by adding/removing elements
    //friends = []; // invalid!! re=assigning


    // assigning a function literal -> const
    const buildTableRows = function (friends) {
        let table = '';
        friends.forEach(function (friend) {
            table += '<tr><td>' + friend.name + '</td><td>' + friend.books.join(', ') + '</td></tr>';
        });

        return table;
    };
    const sortFriendsByName = function (friends) {
        friends.sort(function (friendA, friendB) {
            if (friendA.name < friendB.name) {
                return -1;
            }
            if (friendA.name > friendB.name) {
                return 1;
            }
            return 0;
        });
    };
    const sortTable = function (event) {
        event.preventDefault();
        sortFriendsByName(friends);
        tbody.html(buildTableRows(friends));
    };

    tbody.html(buildTableRows(friends));
    sortName.on('click', sortTable)
</script>
</body>
</html>
